namespace SpriteKind {
    export const Queen = SpriteKind.create()
    export const King = SpriteKind.create()
    export const noble1 = SpriteKind.create()
    export const noble2 = SpriteKind.create()
    export const noble3 = SpriteKind.create()
    export const sprite2 = SpriteKind.create()
    export const sprite3 = SpriteKind.create()
    export const thief = SpriteKind.create()
    export const guard = SpriteKind.create()
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (mySprite.overlapsWith(Queen)) {
        story.spriteSayText(Queen, "Detective, can you tell me who is the thief?")
        pause(1000)
        story.showPlayerChoices("Peter", "Tom", "Timmy", "Bob", "Linda")
        if (story.checkLastAnswer("Peter")) {
            story.spriteSayText(Queen, "Yes, I think I had saw him before the light goes off, guard, catch him!")
            pause(1000)
            Guard = sprites.create(img`
                ..fffff...fffff...
                ..ff11f...f11ff...
                .ff111fffff111ff..
                .f1331111111331f..
                .f1331111111331f..
                .f111fff1fff111f..
                .ff11fffffff11ff..
                ..ff1fff1fff1ff...
                ...ff1111111ff....
                ....ff13331ff.....
                ..fffff333fffff...
                ..fffffffffffff...
                ..fffffffffffff...
                ..fffffffffffff...
                ...f1fffffff1f....
                ....f.fffff.f.....
                ......f1f1f.......
                ......ff.ff.......
                `, SpriteKind.guard)
            Guard2 = sprites.create(img`
                ..fffff...fffff...
                ..ff11f...f11ff...
                .ff111fffff111ff..
                .f1331111111331f..
                .f1331111111331f..
                .f111fff1fff111f..
                .ff11fffffff11ff..
                ..ff1fff1fff1ff...
                ...ff1111111ff....
                ....ff13331ff.....
                ..fffff333fffff...
                ..fffffffffffff...
                ..fffffffffffff...
                ..fffffffffffff...
                ...f1fffffff1f....
                ....f.fffff.f.....
                ......f1f1f.......
                ......ff.ff.......
                `, SpriteKind.guard)
            Guard.setPosition(110, 117)
            Guard2.setPosition(140, 117)
            pause(1000)
            game.over(true)
        } else {
            story.spriteSayText(Queen, "Umm... I don't think so, try again?")
        }
    }
})
function charaters () {
    effects.confetti.startScreenEffect()
    King = sprites.create(img`
        ....fff....fff...
        ...ff1ff..ff1ff..
        ..ff111ffff111f..
        ..f13311111133f..
        ..f13311111133f..
        ..f1111f1f1111f..
        ..ff111f1f111ff..
        ...fd113331ddf...
        ...ddf13331fdd...
        ..fdfffffffffdf..
        .fd68888888868df.
        .f6888888888888f.
        .f88f8888888f86f.
        .ff1f6888888f1ff.
        ...fff777776ff...
        .....f77777ff....
        .....f77f77f.....
        .....f6f.f7f.....
        .....f7f.f7f.....
        .....f1f.f1f.....
        .....fff.fff.....
        `, SpriteKind.King)
    Noble_1 = sprites.create(img`
        ..fffff...fffff...
        ..ff11f...f11ff...
        .ff131fffff131ff..
        .f1331111111331f..
        .f1331111111331f..
        .f111ff111ff111f..
        .ff11ff111ff11ff..
        ..f11111111111f...
        ...f111111111f....
        ....f1133311f.....
        ..ff6ff333ff6ff...
        ..f699fffff996f...
        ..f99999999999f...
        ..ff999999299ff...
        ...f1f2aaaaf1f....
        ....faaaabaaf.....
        .....aaaabaa......
        ....aabaabaaa.....
        `, SpriteKind.noble1)
    Noble_2 = sprites.create(img`
        . . . . f f f f f f . . . . . 
        . . . f b b b b b b f f f . . 
        . . f b b b b 1 1 1 1 1 1 f . 
        . . f b b b 1 1 3 3 3 3 1 1 f 
        . . f b b 1 1 3 3 3 3 3 3 1 f 
        . . f 4 b 1 3 3 1 3 3 3 3 1 f 
        . . f 5 4 1 3 3 3 3 3 3 3 1 f 
        . . f 1 1 1 1 1 3 3 3 1 1 1 f 
        . f 1 1 1 f 1 1 1 1 1 1 f f . 
        f 3 1 1 1 1 1 1 1 f f f . 1 . 
        . f 1 1 1 1 1 1 1 f . . . . . 
        . . f f f 4 a a 5 f . . . . . 
        . . . . f 6 5 5 a f . . . . . 
        . . . . f 6 5 a a a f . . . . 
        . . . . f 6 5 a a a f . . . . 
        . . . . f 6 5 a a a a f f . . 
        . . . . f 6 5 a a a a a a f . 
        . . . . . f f f f f f f f . . 
        `, SpriteKind.noble2)
    Noble_3 = sprites.create(img`
        .....fff........
        ....fbbbff......
        ...fbb1111f.....
        ...fbb13311f....
        ..f11113331f....
        .f11f111331f....
        f3111111111f....
        .f11111111cf....
        ..fc11111bbf....
        ..fbbcbcbcbf.ff.
        ...fcbbcbbfff11f
        ...feeeeeef..f1f
        ...fceebeef..f1f
        ...feeebeeffff1f
        ...fddd1dd1111f.
        ...fddddddffff..
        ....fbffbf......
        ....fcffcf......
        .....f..f.......
        `, SpriteKind.noble3)
    mySprite2 = sprites.create(img`
        ................
        ..ffffff........
        .f1111bbf.......
        f13331bbbf......
        f13311111ff.....
        f1311111111ff...
        f1111111f1111f..
        .ff1111111111cf.
        ..f1111111111f..
        ...f8111111ff...
        ...f7848484f....
        ..f777667756f...
        ..f777666775f...
        ..f777766177f...
        ...fcccccccf....
        ....fccfccf.....
        ....f1ff1f......
        .....f..f.......
        ................
        `, SpriteKind.sprite2)
    mySprite3 = sprites.create(img`
        ...fff..fff.....
        ..f111ffbbbf....
        .f113515b5b5f...
        .f1335555555f...
        .f133111111f....
        .f1311111111ff..
        .f1111111f1111f.
        ..ff1111111111cf
        ...f1111111111f.
        ....f1111111ff..
        .....f8886ff....
        .....f66867f....
        ....f66667bf....
        ...f668667bf....
        ...f66167bbf....
        .ff666667bbf....
        f66666667bbf....
        .fffff1ff1f.....
        ......f..f......
        `, SpriteKind.sprite3)
    Thief = sprites.create(img`
        ......ff..fff...
        .....f11ff111f..
        ....f11bb11131f.
        ....f1b1111131f.
        ....ff11111111f.
        .fff111111111f..
        f3111f1111f11f..
        f111111111111f..
        .f11111111111f..
        ..fff111111eff..
        ....ff44444eeef.
        ...f9f4844424ef.
        ....f884e2444ef.
        ....f884e4444ef.
        ...f8449e4444ef.
        ....ff449e11e4f.
        .....f11f111ff..
        .....f11f11f....
        ......ff.ff.....
        `, SpriteKind.thief)
    King.setPosition(150, 200)
    Noble_1.setPosition(50, 160)
    Noble_2.setPosition(250, 150)
    Noble_3.setPosition(80, 230)
    mySprite2.setPosition(160, 70)
    mySprite3.setPosition(30, 99)
    Thief.setPosition(200, 130)
}
function place_the_character () {
    mySprite2 = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Player)
}
function Scence_1 () {
    story.spriteSayText(King, "King: let's celebrate the birthday of my dear wife, the queen together!")
    pause(100)
    story.spriteSayText(Noble_1, "Linda: Wow, look at the queen's diamond ring, that's fantastic!")
    pause(100)
    story.spriteSayText(Thief, "Peter: umm....")
    pause(100)
    story.spriteSayText(mySprite2, "Bob: The food looks delicious")
    pause(100)
    story.spriteSayText(Noble_3, "Robert: Cheers for the country and our queen!")
    pause(500)
    effects.confetti.endScreenEffect()
    timer.after(3000, function () {
        scene.cameraShake(4, 2000)
        lantern.startLanternEffect(mySprite)
        lantern.setLightBandWidth(20)
    })
    timer.after(5000, function () {
        game.showLongText("What happen?", DialogLayout.Bottom)
        game.showLongText("\"AHHH!!\" The queen screamed. \" Where is my diamond ring???\"", DialogLayout.Center)
        game.showLongText("Visit each character and double press A to see how they react! ", DialogLayout.Center)
        story.printDialog("Don't worry, my queen, I will help you to find out the theif!", 80, 90, 50, 150)
        Thief.setPosition(120, 117)
    })
}
controller.menu.onEvent(ControllerButtonEvent.Pressed, function () {
    game.showLongText("Use the controller to move the character, double press A to talk to other character when you are beside them, if you had made your decision, find the queen and press B ", DialogLayout.Full)
})
controller.A.onEvent(ControllerButtonEvent.Repeated, function () {
    if (mySprite.overlapsWith(King)) {
        story.spriteSayText(King, "King: You think I steal my wife's ring?")
        pause(1000)
    }
    if (mySprite.overlapsWith(Noble_1)) {
        story.spriteSayText(Noble_1, "Linda: No! It's not me! I only think that the ring looks beautiful!")
        pause(1000)
    }
    if (mySprite.overlapsWith(mySprite2)) {
        story.spriteSayText(mySprite2, "Bob: Oh my gosh! I can't see my food! Where are the cakes?")
        pause(1000)
    }
    if (mySprite.overlapsWith(mySprite3)) {
        story.spriteSayText(mySprite3, "Tom: Mum, where are you??")
        pause(1000)
    }
    if (mySprite.overlapsWith(Noble_2)) {
        story.spriteSayText(Noble_2, "Timmy: It is so dark here, I can't see anything....")
        pause(1000)
    }
    if (mySprite.overlapsWith(Noble_3)) {
        story.spriteSayText(Noble_3, "Robert: Queen! Save the queen, hurry up!")
        pause(1000)
    }
    if (mySprite.overlapsWith(Queen)) {
        story.spriteSayText(Queen, "Queen: I got the ring from my grandma... Can you help me, detective?")
        pause(1000)
    }
    if (mySprite.overlapsWith(Thief)) {
        story.spriteSayText(Thief, "Peter: It's not me, I know nothing.. ")
        pause(1000)
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`transparency16`, function (sprite, location) {
	
})
let Thief: Sprite = null
let mySprite3: Sprite = null
let mySprite2: Sprite = null
let Noble_3: Sprite = null
let Noble_2: Sprite = null
let Noble_1: Sprite = null
let King: Sprite = null
let Guard2: Sprite = null
let Guard: Sprite = null
let Queen: Sprite = null
let mySprite: Sprite = null
tiles.setTilemap(tilemap`level2`)
mySprite = sprites.create(img`
    ..fffff...fffff...
    ..ff11f...f11ff...
    .ff111fffff111ff..
    .f1331111111331f..
    .f1331111111331f..
    .f1111f111f1111f..
    .ff111f111f111ff..
    ..ff111111111ff...
    ...ff1111111ff....
    ....ff13331ff.....
    ..ff6ff333ff6ff...
    ..f6eefffffee6f...
    ..feeeeeeeeeeef...
    ..ffeeeeeeeeeff...
    ...f1f88888f1f....
    ....f.f868f.f.....
    ......f1f1f.......
    ......ff.ff.......
    `, SpriteKind.Player)
mySprite.setPosition(80, 117)
controller.moveSprite(mySprite)
scene.cameraFollowSprite(mySprite)
game.setDialogFrame(img`
    .....cccccccccccccc.....
    ...cbd111111111111dbc...
    ..cd1111111111111111dc..
    .cd111111111111111111dc.
    .b11111111111111111111b.
    cd11111111111111111111dc
    c1111111111111111111111c
    c1111111111111111111111c
    c1111111111111111111111c
    c1111111111111111111111c
    c1111111111111111111111c
    c1111111111111111111111c
    c1111111111111111111111c
    c1111111111111111111111c
    c1111111111111111111111c
    c1111111111111111111111c
    cd11111111111111111111dc
    cb11111111111111111111bc
    ccd111111111111111111dc.
    .ccd1111111111111111dcc.
    ..c111111111111111dbcc..
    .b11dcccccccccccccccc...
    cddcccccccccccccccc.....
    ccccc...................
    `)
game.showLongText("You are a detective, you are now joining a party celebrating the queen's birthday", DialogLayout.Full)
game.showLongText("Use the controller to move the character, and explore the venue ", DialogLayout.Full)
Queen = sprites.create(img`
    ..ffff...ffff.....
    .ff11f...f11ff....
    .f131fffff131f....
    .f13111111131f....
    .f111f111f111f....
    .ff11f111f11ff....
    ..ff1111111ff.....
    ...ff13331ff......
    ....ff333ff.......
    ...f59fff91f......
    ..f112929511f.....
    ..f112292211f.....
    ..f112222211f.....
    ..f1ff555ff1f.....
    ...ff22222ff......
    ....f22222f.......
    ...ff222222ff.....
    ...f22222522f.....
    ..ff22222522ff....
    ..f2222225222ff...
    .f52fff22522ffff..
    `, SpriteKind.Queen)
Queen.setPosition(100, 117)
story.printText("Hello, the greatest detective in our country", 120, 100)
story.printText("Welcome to my party!", 120, 100)
story.printText("It's my honour to be here", 60, 100)
story.printText("Happy birthday, you majesty", 60, 100, 15, 1, story.TextSpeed.Normal)
story.printText("Thank you, enjoy yourself tonight!", 120, 100)
charaters()
Scence_1()
